<h1 class="text-center my-4">Authors-App Users</h1>

<div id="users" class="text-center mx-auto w-100">
  <table class="table table-hover table-active text-light">
        <thead>
            <tr>
              <th scope="col">First Name</th>
              <th scope="col">Last Name</th>
              <th scope="col">Email</th>
              <th scope="col">Books read</th>
              <th scope="col">Action</th>
            </tr>
        </thead>
        <tbody>
          <% @users.each do |user| %>
              <tr class="text-light">
                <td><%= user.first_name %></td>
                <td><%= user.last_name %></td>
                <td><%= user.email %></td>
                <%
                  books_count = 0
                  user.authors.each { |a|
                    books_count += a.books.length
                  }
                %>
                <td><%= books_count %></td>
                <td><%= link_to "Show", user, class:"text-info" %></td>
              </tr>
          <% end %>
        </tbody>
  </table>
    <%= page_entries_info @users %>
    <%= paginate @users, theme: 'bootstrap-5', pagination_class: "my-3 pagination-sm flex-wrap justify-content-center" %>

</div>